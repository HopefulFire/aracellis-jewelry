<h1>Editing <%= @post.title %> by <%= post.user.username %></h1>
<div class="posts">
	<form method="POST">
		<input type="hidden" name="_method" value="PATCH">
		<label for="title">Title:</label>
		<input type="text" name="title" id="title" defaultValue=<%= @post.title %>>

		<label for="body">Body:</label>
		<input type="text" name="body" id="body" defaultValue=<%= @post.body %>>

		<input type="submit" name="submit">
	</form>
	<% if @user == @post.user || user&.is_admin %>
		<form method="GET" action=<%= "/posts/#{@post.id}/edit" %>>
			<input type="submit" name="edit" value="edit">
		</form>
		<form method="GET" action=<%= "/posts/#{@post.id}" %>>
			<input type="hidden" name="_method" value="DELETE" id="delete">
			<input type="submit" name="delete" value="delete">
		</form>
		<a href=<%= "/comments/new/#{@post.id}" %>>Comment</a>
	<% end %>
</div>
<div class="comments">
	<% @post.comments.reverse_each do |comment| %>
		<h2><%= comment.user.username %></h2>
		<p><%= comment.body %></p>
		<% if @comment.user == @user || @user&.is_admin %>
			<form method="GET" action=<%= "/comments/#{@comment.id}/edit" %>>
				<input type="submit" name="edit" value="edit">
			</form>
			<form method="GET" action=<%= "/comments/#{@comment.id}" %>>
				<input type="hidden" name="_method" value="DELETE" id="delete">
				<input type="submit" name="delete" value="delete">
			</form>
		<% end %>
	<% end %>
</div>